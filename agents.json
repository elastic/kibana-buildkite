{
  "gcp": {
    "project": "elastic-kibana-ci",
    "zones": ["us-central1-a", "us-central1-c", "us-central1-f"],
    "serviceAccount": "elastic-buildkite-agent@elastic-kibana-ci.iam.gserviceaccount.com",
    "imageFamily": "kb-ubuntu",
    "subnetwork": "buildkite",
    "disableExternalIp": true,
    "diskType": "pd-ssd",
    "diskSizeGb": 75,
    "overprovision": 0,
    "minimumAgents": 0,
    "maximumAgents": 1250,
    "gracefulStopAfterMins": 1260,
    "hardStopAfterMins": 1440,
    "idleTimeoutMins": 10,
    "exitAfterOneJob": true,

    "agents": [
      {
        "queue": "default",
        "name": "kb-default",
        "machineType": "n2-standard-2",
        "minimumAgents": 2,
        "maximumAgents": 100,
        "idleTimeoutMins": 60,
        "exitAfterOneJob": false
      },
      {
        "queue": "c2-60",
        "name": "kb-c2-60",
        "machineType": "c2-standard-60",
        "localSsds": 8,
        "maximumAgents": 20
      },
      {
        "queue": "c2-16",
        "name": "kb-c2-16",
        "machineType": "c2-standard-16",
        "localSsds": 2,
        "maximumAgents": 200
      },
      {
        "queue": "c2-8",
        "name": "kb-c2-8",
        "machineType": "c2-standard-8",
        "localSsds": 1
      },
      {
        "queue": "c2-4",
        "name": "kb-c2-4",
        "machineType": "c2-standard-4",
        "localSsds": 1
      },
      {
        "queue": "n2-2",
        "name": "kb-n2-2",
        "machineType": "n2-standard-2",
        "localSsds": 1
      },
      {
        "queue": "n2-4",
        "name": "kb-n2-4",
        "machineType": "n2-standard-4",
        "localSsds": 1
      },
      {
        "queue": "jest",
        "name": "kb-jest",
        "machineType": "n2-standard-2",
        "diskSizeGb": 128
      },
      {
        "queue": "ci-group",
        "name": "kb-cigroup",
        "machineType": "n2-standard-8",
        "localSsds": 1
      },
      {
        "queue": "ci-group-4",
        "name": "kb-cigroup-4",
        "machineType": "n2-standard-4",
        "localSsds": 1
      },
      {
        "queue": "ci-group-4d",
        "name": "kb-cigroup-4d",
        "machineType": "n2d-standard-4",
        "localSsds": 1
      },
      {
        "queue": "ci-group-6",
        "name": "kb-cigroup-6",
        "machineType": "n2-custom-6-16384",
        "localSsds": 1
      },
      {
        "queue": "jest-2-10g",
        "name": "jest-2-10g",
        "machineType": "n2d-custom-2-10240"
      },
      {
        "queue": "packer",
        "name": "kb-packer",
        "serviceAccount": "buildkite-packer-agent@elastic-kibana-ci.iam.gserviceaccount.com",
        "maximumAgents": 10,
        "machineType": "e2-small"
      },
      {
        "queue": "terraform",
        "name": "kb-terraform",
        "serviceAccount": "buildkite-terraform@elastic-kibana-ci.iam.gserviceaccount.com",
        "maximumAgents": 10,
        "machineType": "e2-small"
      },
      {
        "queue": "cistats",
        "name": "kb-cistats",
        "serviceAccount": "kibana-ci-stats-ci-worker@elastic-kibana-ci.iam.gserviceaccount.com",
        "machineType": "n2-standard-4",
        "maximumAgents": 10,
        "idleTimeoutMins": 20,
        "exitAfterOneJob": false
      },
      {
        "queue": "ci-group-4-idle",
        "name": "kb-cigroup-4-idle",
        "machineType": "n2-standard-4",
        "localSsds": 1,
        "idleTimeoutMins": 10,
        "exitAfterOneJob": false
      },
      {
        "queue": "ci-group-4d-idle",
        "name": "kb-cigroup-4d-idle",
        "machineType": "n2d-standard-4",
        "localSsds": 1,
        "idleTimeoutMins": 10,
        "exitAfterOneJob": false
      },
      {
        "queue": "ci-group-6-idle",
        "name": "kb-cigroup-6-idle",
        "machineType": "n2-custom-6-16384",
        "localSsds": 1,
        "idleTimeoutMins": 10,
        "exitAfterOneJob": false
      },
      {
        "queue": "n2-4-virt",
        "name": "kb-n2-4-virt",
        "machineType": "n2-standard-4",
        "localSsds": 1,
        "nestedVirtualization": true
      },
      {
        "queue": "n2-16-virt",
        "name": "kb-n2-16-virt",
        "machineType": "n2-standard-16",
        "localSsds": 2,
        "nestedVirtualization": true
      },
      {
        "queue": "n2-4-spot",
        "name": "kb-n2-4-spot",
        "machineType": "n2-standard-4",
        "localSsds": 1,
        "spot": true
      }
    ]
  }
}
